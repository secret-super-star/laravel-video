var scrollAnimation=false;bootbox.setDefaults({locale:"en",});var adblockDialog;jQuery(document).ready(function($){adblockDialog=bootbox.dialog({message:'<h3 class="text-center">Disable Adblock</h3><p class="text-center">Our website is made possible by displaying online advertisements to our visitors. Please disable your ad blocker.</p><p class="text-center"><a href="javascript:window.top.location.reload();">Click for reload the page</a></p>',closeButton:false,show:false,size:'small'});$(window).scroll(function(){var top=$(window).scrollTop();if(top>500){$('#subir').addClass('subir-activo');$('#subir').removeClass('subir-inactivo');}else{$('#subir').removeClass('subir-activo');$('#subir').addClass('subir-inactivo');}});$('#subir').click(function(){scrollTop();return false;});$(document).bind("mousewheel",function(){if(scrollAnimation){return false;}});function scrollTop(){scrollAnimation=true;$('body,html').animate({scrollTop:0},500,function(){scrollAnimation=false;});return false;}
$('.registro_link').click(function(){registroDialog();});$('.login_link').click(function(){loginDialog();});if(reset_token!=""){passwordDialog(reset_token);}});function registroDialog(){bootbox.hideAll();var contenido='<div class="bootbox_outtext hidden-xs hidden-sm"><a href="javascript:void(0)" onclick="loginDialog();">¿Already registered? Log In</a></div><div class="clearfix"></div>'+'<div class="bootbox_facebook"><a href="facebook/login/" class="fb_link"><img src="img/facebook-login.png" style="max-width: 150px"></a></div>'+'<div class="row bootbox_container">'+'<div class="col-xs-12 col-sm-12 col-md-12">'+'<div id="server_response"></div>'+'<form name="registro_form" id="registro_form" action="ajax/registro" method="post" class="form-horizontal">'+'<div class="form-group">'+'<div class="col-md-12 hr-form">'+'<input id="nombre" name="nombre" type="text" placeholder="Full Name" class="form-control" required>'+'</div>'+'</div>'+'<div class="form-group">'+'<div class="col-md-12 hr-form">'+'<input id="email" name="email" type="email" placeholder="Email" class="form-control" required>'+'</div>'+'</div>'+'<div class="form-group" style="margin-top: 22px">'+'<div class="col-md-12 hr-form">'+'<input id="password" name="password" type="password" placeholder="Password" class="form-control" required>'+'</div>'+'</div>'+'<div class="form-group" style="margin-top: 22px">'+'<div class="col-md-12 hr-form">'+'<input id="password_confirmation" name="password_confirmation" type="password" placeholder="Confirm your password" class="form-control" required>'+'</div>'+'</div>'+'<div class="row" style="margin-top: 22px">'+'<div class="col-xs-1 col-sm-1 col-md-1" style="padding-right: 0"><input style="display: none" type="checkbox" name="terms" id="terms"><a href="javascript:void(0)" id="registro_acepto">Acepto</a></div>'+'<div class="col-xs-11 col-sm-11 col-md-11 privacidad_text" style="padding-left: 0">'+'<span>I accept <a href="./privacy/">privacy policy</a> and <a href="./terms/">terms and conditions</a>.</span>'+'</div>'+'</div>'+'<div class="clearfix"></div><div style="margin-top: 22px">'+'<div class="boton"><button type="button" class="btn btn-danger" onclick="bootbox.hideAll();">Cancel</button> <button type="submit" class="btn btn-default">Create account</button></div>'+'<div class="bootbox_outtext2 visible-xs-block visible-sm-block"><a href="javascript:void(0)" onclick="loginDialog();">¿Already registered? Log In</a></div>'+'</div>'+'</form>'+'</div>'+'</div>';var dialog=bootbox.dialog({title:'Create your free account!',backdrop:'static',closeButton:true,animate:true,locale:'es',size:'large',onEscape:function(){},message:contenido,buttons:{}});dialog.on("shown.bs.modal",function(){$('.bootbox_facebook, .bootbox_facebook_text').unbind().hover(function(){$('.bootbox_facebook_hover').show();$('.bootbox_facebook a').addClass('sel');},function(){$('.bootbox_facebook a').removeClass('sel');$('.bootbox_facebook_hover').hide();});$('#registro_acepto').click(function(){if(!$(this).hasClass('sel')){$('#terms').prop('checked',true);$(this).addClass('sel');}else{$('#terms').prop('checked',false);$(this).removeClass('sel');}});$('#registro_form').append('<input type="hidden" name="_token" id="_token" value="'+$('meta[name="csrf-token"]').attr('content')+'">');$('#registro_form').submit(function(e){e.preventDefault();$('#server_response').html('');$('#registro_form input').removeClass('bootbox_error');$.post($(this).attr('action'),$(this).serialize()).done(function(data){data=JSON.parse(data);manejaRespuesta(data);if(data.tipo=='success'){}}).fail(function(data){manejaRespuesta(JSON.parse(data.responseJSON));});});});}
function manejaRespuesta(data){if(typeof data=='object'&&typeof data.tipo=='undefined'){var msg="";$.each(data,function(key,value){msg+=(key=="terms")?"Debes aceptar los términos y condiciones.":value+'<br>';});$('#server_response').html('<div class="alert alert-danger text-center" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true"><i class="fa fa-times-circle"></i></span></button>'+msg+'</div>');}else{if(typeof data.tipo=='undefined'){data.tipo='error';}
$('#server_response').html('<div class="alert alert-'+data.tipo+' text-center" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true"><i class="fa fa-times-circle"></i></span></button>'+data.mensaje+'</div>');}}
function forgotDialog(){bootbox.hideAll();var dialog=bootbox.dialog({title:false,backdrop:'static',closeButton:false,animate:true,locale:'es',size:'large',onEscape:function(){},message:'<div class="bootbox_back"><a class="degradado-transition" href="javascript:void(0)" onclick="bootbox.hideAll();">Cerrar</a></div><div class="clearfix"></div>'+'<div class="bootbox_logo"><img src="img/logo_ventana.png" class="img-responsive"></div>'+'<div class="bootbox_slogan">¿Has olvidado tu contraseña?</div>'+'<div class="row bootbox_container2">'+'<p class="bootbox_texto">No te preocupes, te ayudaremos.<br>Coloca la dirección de correo electrónico que usaste para registrarte y  en seguida te enviaremos las instrucciones para que restablezcas tu contraseña.</p>'+'<div class="col-xs-12 col-sm-12 col-md-12">'+'<div id="server_response"></div>'+'<form name="forgot_form" id="forgot_form" action="ajax/recuperar" method="post" class="form-horizontal">'+'<div class="form-group">'+'<div class="col-md-12">'+'<input id="email" name="email" type="email" placeholder="Email" class="form-control" required>'+'</div>'+'</div>'+'<div class="clearfix"></div><div style="margin-top: 22px">'+'<div class="boton"><button type="submit">Enviar</button></div>'+'</div>'+'</form>'+'</div>'+'</div>',buttons:{}});dialog.on("shown.bs.modal",function(){$('#forgot_form').append('<input type="hidden" name="_token" id="_token" value="'+$('meta[name="csrf-token"]').attr('content')+'">');$('#forgot_form').submit(function(e){e.preventDefault();$('#server_response').html('');$('#forgot_form input').removeClass('bootbox_error');$.post($(this).attr('action'),$(this).serialize()).done(function(data){data=JSON.parse(data);console.log(data);manejaRespuesta(data);}).fail(function(data){manejaRespuesta(JSON.parse(data.responseJSON));});});});}
function passwordDialog(){bootbox.hideAll();var dialog=bootbox.dialog({title:false,backdrop:'static',closeButton:false,animate:true,locale:'es',size:'large',onEscape:function(){},message:'<div class="bootbox_back"><a class="degradado-transition" href="javascript:void(0)" onclick="bootbox.hideAll();">Cerrar</a></div><div class="clearfix"></div>'+'<div class="bootbox_logo"><img src="img/logo_ventana.png" class="img-responsive"></div>'+'<div class="bootbox_slogan">Escribe tu email y contraseña.</div>'+'<div class="row bootbox_container2">'+'<div class="col-xs-12 col-sm-12 col-md-12">'+'<div id="server_response"></div>'+'<form name="forgot_form" id="forgot_form" action="ajax/password" method="post" class="form-horizontal">'+'<div class="form-group">'+'<div class="col-md-12">'+'<input id="email" name="email" type="email" placeholder="Email" class="form-control" required>'+'</div>'+'</div>'+'<div class="form-group">'+'<div class="col-md-12">'+'<input id="password" name="password" type="password" placeholder="Contraseña" class="form-control" required>'+'</div>'+'</div>'+'<div class="form-group">'+'<div class="col-md-12">'+'<input id="password_confirmation" name="password_confirmation" type="password" placeholder="Confirmar contraseña" class="form-control" required>'+'</div>'+'</div>'+'<div class="clearfix"></div><div style="margin-top: 22px">'+'<div class="boton"><button type="submit">Enviar</button></div>'+'</div>'+'</form>'+'</div>'+'</div>',buttons:{}});dialog.on("shown.bs.modal",function(){$('#forgot_form').append('<input type="hidden" name="_token" id="_token" value="'+$('meta[name="csrf-token"]').attr('content')+'">');$('#forgot_form').submit(function(e){e.preventDefault();$('#server_response').html('');$('#forgot_form input').removeClass('bootbox_error');$.post($(this).attr('action'),$(this).serialize()+"&token="+reset_token).done(function(data){data=JSON.parse(data);console.log(data);manejaRespuesta(data);}).fail(function(data){manejaRespuesta(JSON.parse(data.responseJSON));});});});}
var loginRedirect="";function loginDialog(){bootbox.hideAll();var dialog=bootbox.dialog({title:false,backdrop:'static',closeButton:false,animate:true,locale:'es',size:'large',onEscape:function(){},message:'<div class="bootbox_outtext hidden-xs hidden-sm"><a href="javascript:void(0)" onclick="forgotDialog();">¿Olvidaste tu contraseña?</a></div><div class="bootbox_outtext hidden-xs hidden-sm" style="left: 0; right: inherit;"><a href="javascript:void(0)" onclick="registroDialog();">Crear cuenta</a></div><div class="bootbox_back"><a class="degradado-transition" href="javascript:void(0)" onclick="bootbox.hideAll();">Cerrar</a></div><div class="clearfix"></div>'+'<div class="bootbox_logo"><img src="img/logo_ventana.png" class="img-responsive"></div>'+'<div class="bootbox_slogan">¡Inicia sesión desde tu cuenta kllaar!</div>'+'<div class="row bootbox_container">'+'<div class="col-xs-12 col-sm-12 col-md-12">'+'<div id="server_response"></div>'+'<form name="login_form" id="login_form" action="ajax/login" method="post" class="form-horizontal">'+'<div class="form-group">'+'<div class="col-md-12 hr-form">'+'<input id="email" name="email" type="email" placeholder="Email" class="form-control" required>'+'</div>'+'</div>'+'<div class="form-group" style="margin-top: 22px">'+'<div class="col-md-12 hr-form">'+'<input id="password" name="password" type="password" placeholder="Contraseña" class="form-control" required>'+'</div>'+'</div>'+'<div style="margin-top: 20px">'+'<div class="boton"><button type="submit">Entrar</button></div>'+'</div>'+'<div class="bootbox_outtext2 visible-xs-block visible-sm-block"><a href="javascript:void(0)" onclick="registroDialog();">Crear cuenta</a></div>'+'<div class="bootbox_outtext2 visible-xs-block visible-sm-block"><a href="javascript:void(0)" onclick="forgotDialog();">¿Olvidaste tu contraseña?</a></div>'+'<div class="login_separador"></div>'+'<div class="col-xs-12 col-sm-12 col-md-12 degradado-transition" style="min-height: 118px">'+'<div class="bootbox_facebook" style="margin-top: 22px"><a href="facebook/login/" class="fb_link">Entrar con facebook</a></div>'+'<div class="bootbox_facebook_text" style="padding: 10px"><a href="facebook/login/" class="fb_link">Entrar con facebook</a></div>'+'<div class="bootbox_facebook_hover"></div>'+'</div>'+'</form>'+'</div>'+'</div>',buttons:{}});dialog.on("hidden.bs.modal",function(){loginRedirect="";});dialog.on("shown.bs.modal",function(){$('.bootbox_facebook, .bootbox_facebook_text').unbind().hover(function(){$('.bootbox_facebook_hover').show();$('.bootbox_facebook a').addClass('sel');},function(){$('.bootbox_facebook a').removeClass('sel');$('.bootbox_facebook_hover').hide();});$('#login_form').append('<input type="hidden" name="_token" id="_token" value="'+$('meta[name="csrf-token"]').attr('content')+'">');$('#login_form').submit(function(e){e.preventDefault();$('#server_response').html('');$('#login_form input').removeClass('bootbox_error');$.post($(this).attr('action'),$(this).serialize()).done(function(data){data=JSON.parse(data);manejaRespuesta(data);if(data.tipo=='success'){if(jQuery.trim(loginRedirect)==""){window.top.location.reload();}else{window.top.location=jQuery.trim(loginRedirect);}}}).fail(function(data){data=JSON.parse(data);manejaRespuesta(JSON.parse(data.responseJSON));});});});$.ajaxSetup({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')}});}